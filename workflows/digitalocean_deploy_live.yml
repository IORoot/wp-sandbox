name: Deploy to Server

on:
    # push:
    #   branches: [ master ]

    workflow_dispatch:

jobs:
    Build:
        runs-on: self-hosted

        steps:
            - name: Checkout Repo ğŸ›’
              uses: actions/checkout@v3

            - name: .env file ğŸŒ
              run: |
                  echo '${{ secrets.ENV_LIVE_B64 }}' | base64 -d > .env

            - name: load database ğŸ›¢ï¸
              run: |
                  ./database/database_load.sh ./database/backup.sql

            - name: Run build ğŸš€
              run: |
                  docker compose up -d
