name: ğŸš€ Deploy To Docker Server

on:
    push:
        branches: [master]

    workflow_dispatch:

jobs:
    Build:
        runs-on: self-hosted

        steps:
            - name: ğŸ›’ Checkout Repo
              uses: actions/checkout@v3

            - name: ğŸŒ .env file
              run: |
                  echo '${{ secrets.ENV_LIVE_B64 }}' | base64 -d > .env

            - name: ğŸ³ Run docker compose
              run: |
                  docker compose up -d

            - name: ğŸ›¢ï¸ Import Database
              run: |
                  ./database/database_load.sh ./database/backup.sql
